<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>添加员工信息</title>
    {% load staticfiles %}
    <script src="{% static 'js/jquery-3.4.1.min.js'%}"></script>
    <script src="{% static 'js/common.js'%}"></script>

    <script>
        function isAdmin(){  //若录入员工为管理员,则显示密码设置框;否则隐藏密码设置框
            var is_admin = $("input[name='is_admin']:checked").val();
            if(is_admin == 'T')
                $("#pwd_div").css("display","block")
            else
                $("#pwd_div").css("display","none")
        }
        function checkInfo(){
            var is_admin = $("input[name='is_admin']:checked").val()
            if (is_admin == 'T'){
                var result = checkPwd()
                if (result == false)
                    return false
                else
                    return true
            }
            return true
        }
    </script>
</head>
<body>
    <div>
        <form action="addEmployee" method="post" onsubmit="return checkInfo()">
            <label>身份证号</label><input type="text" name="id"><br><br>
            <label>员工编号</label><input type="text" name="emp_id"><br><br>
            <label>员工姓名</label><input type="text" name="emp_name"><br><br>
            <label>是否为管理员</label>
                      <input type="radio" value="T" name="is_admin" onchange="isAdmin()">是
                      <input type="radio" value="F" name="is_admin" checked="checked" onchange="isAdmin()">否<br><br>
                <div id="pwd_div" style="display:none;">
                    密码&nbsp;&nbsp;<input type="password" name="password" id="password"><br><br>
                    确认密码&nbsp;<input type="password" name="repPassword" id="repPassword"><br>
                    <span id="err_info" style="color:red"></span>
                </div><br>
            <label>联系电话</label><input type="text" name="telephone"><br><br>
            <label>邮箱</label><input type="text" name="email"><br><br>
            <label>性别</label>
                      <input type="radio" checked="checked" value="M" name="sex">男
                      <input type="radio" value="F" name="sex">女<br><br>
            <label>入职时间</label><input type="text" name="join_time"><br><br>
            <label>所在部门</label>
            {% if depts is not null %}
                    <select name="emp_dept">
                        {% for dept in depts %}
                            <option value="{{dept.dept_id}}">{{dept.dept_name}}</option>
                        {% endfor %}
                    </select>
                {% endif %}
            <label>就职状态</label>
                        <input type="radio" checked="checked" value="F" name="is_removed">在职
                      <input type="radio" value="T" name="is_removed">离职<br><br>
        <input type="submit" value="提交">&nbsp;&nbsp;<input type="reset" value="重置"><br><br>
        </form>
    </div>
</body>
</html>