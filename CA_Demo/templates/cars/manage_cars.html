<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>车辆信息管理</title>
    {% load staticfiles %}
    <script src="{% static 'js/common.js'%}"></script>
    <script>
        function delData(){
            var ids_arr = checkSelection()
            var ids = ids_arr.join(",")
            if (ids != "")
                var c = confirm("确定要删除这些记录吗!")
                if(c==true)
                    window.location.href = "deleteCarById?ids="+ids
            else
                alert("请选择需要删除的内容!")
        }
        function search(){
            keywords = document.getElementById("keywords").value
            if(keywords != "")
                window.location.href = "getCarsByIdOrName?keywords=" + keywords
            else
                alert("请输入需要查询的内容")
         }
    </script>
</head>
<body>
    <div>
         <input type="text" name="keywords" id="keywords" placeholder="请输入车辆型号或名称">&nbsp;
         <button onclick="search()">搜索</button>&nbsp;
        <button><a href="toAddCar" style="text-decoration:none">添加</a></button>&nbsp;
        <button onclick="delData()">删除</button>
    </div>

    <div>
        <center>
    <table border="1" cellspacing="0">
        <tr>
            <th><input type="checkbox" onclick="selectAll()" id="ctrl_box">全选</th>
            <th>车型编号</th>
            <th>车辆名称</th>
            <th>出厂时间</th>
            <th>总质量(kg)</th>
            <th>额定承重量</th>
            <th>电机功率(kw)</th>
            <th>发动机型号</th>
            <th>乘员数</th>
            <th>色系</th>
            <th>生产状态</th>
            <th>备注</th>
            <th>操作</th>
        </tr>
        {% for c_list in car_list %}
            <tr>
                <td><input type="checkbox" value="{{c_list.car.car_id}}" name="selected"></td>
                <td>{{c_list.car.car_id}}</td>
                <td>{{c_list.car.car_name}}</td>
                <td>{{c_list.car.produce_time}}</td>
                <td>{{c_list.car.car_weight}}</td>
                <td>{{c_list.car.allowable_weight}}</td>
                <td>{{c_list.car.power}}</td>
                <td>{{c_list.car.engine}}</td>
                <td>{{c_list.car.number}}</td>
                <td>
                    {% for color in c_list.color_list %}
                        {{color}}<br>
                    {% endfor %}
                </td>
                <td>{% ifequal c_list.car.is_removed 'F' %}在产 {% else %} 停产 {% endifequal %}</td>
                <td>{{c_list.car.remark}}</td>
                <td><a href="toUpdateCarById?car_id={{c_list.car.car_id}}">修改</a></td>
            </tr>
        {% endfor %}
    </table>
</center>
    </div>
</body>
</html>